@inject AuthenticationStateProvider AuthenticationStateProvider

<div class="nav-wrapper">

    <!-- Left: Logo -->
    <div class="nav-left">
        <img src="images/MuseekLogo.png" class="logo-img" />
        <h1 class="logo-text">Museek</h1>
    </div>

    <!-- Center: Navigation Links -->
    <div class="nav-center">
        <NavLink href="/" Match="NavLinkMatch.All">
            <img src="images/homeIcon.png" class="icon" /> Home
        </NavLink>

        <NavLink href="/library">
            <img src="images/album.png" class="icon" /> Library
        </NavLink>

        <NavLink href="/discover">
            <img src="images/search.png" class="icon" /> Discover
        </NavLink>

        <AuthorizeView>
            <Authorized>
                <NavLink href="/upload-song">
                    <img src="images/upload.png" class="icon" /> Upload Music
                </NavLink>
            </Authorized>
        </AuthorizeView>


    </div>

    <!-- Right: User profile -->
    <div class="nav-right">
        <AuthorizeView>
            <Authorized>
                <div class="user-area">
                    <img src="images/userIcon.png" class="profile-icon" />
                    <span>@firstName</span>
                </div>
            </Authorized>

            <NotAuthorized>
                <NavLink href="Account/Login">
                    <img src="images/userIcon.png" class="profile-icon" />
                </NavLink>
            </NotAuthorized>
        </AuthorizeView>
    </div>
</div>


@code {
    private string? firstName;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity != null && user.Identity.IsAuthenticated)
        {
            firstName = user.Claims.FirstOrDefault(c => c.Type == "FirstName")?.Value
                        ?? user.Identity.Name;
        }
    }
}
